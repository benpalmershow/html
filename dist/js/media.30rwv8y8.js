document.addEventListener("DOMContentLoaded",function(){let F=document.getElementById("media-cards-container"),x=document.getElementById("filter-type"),A=document.getElementById("sort-by"),Y=[];function E(j){let W=new Set;return j.forEach((Z)=>{if(Z.mediaType)W.add(Z.mediaType)}),Array.from(W).sort()}function b(j){let W=document.getElementById("filter-type");while(W.options.length>1)W.remove(1);j.forEach((Z)=>{let $=document.createElement("option");$.value=Z,$.setAttribute("aria-label",`Filter by ${Z}`),$.textContent=Z.charAt(0).toUpperCase()+Z.slice(1)+"s",W.appendChild($)})}let D="media-data-cache-v3",B=300000;async function v(){F.innerHTML='<div class="loading-state"><i class="fas fa-spinner fa-spin"></i>Loading media...</div>';try{let j=localStorage.getItem(D);if(j){let{data:$,timestamp:q}=JSON.parse(j);if(Date.now()-q<B){Y=$,T();return}}let W=document.querySelector('meta[name="last-commit"]')&&document.querySelector('meta[name="last-commit"]').getAttribute("content")||Date.now(),Z=await fetch(`json/media.json?v=${encodeURIComponent(W)}`);if(!Z.ok)if(Z.status===404)throw Error("Media data file not found");else if(Z.status>=500)throw Error("Server error occurred");else throw Error(`Failed to fetch media data (${Z.status})`);Y=await Z.json(),Y=Y.filter(f),localStorage.setItem(D,JSON.stringify({data:Y,timestamp:Date.now()})),T()}catch(j){console.error("Error loading media data:",j);let W="Error loading media.";if(j.name==="TypeError")W+=" Please check your internet connection.";else W+=" "+j.message;F.innerHTML=`<div class="error-state"><i class="fas fa-exclamation-triangle"></i><p>${W}</p><button onclick="location.reload()" class="retry-button">Try Again</button></div>`}}function T(){let j=E(Y);if(b(j),A)A.value="date-desc";let Z=new URLSearchParams(window.location.search).get("filter");if(Z&&j.includes(Z))x.value=Z;L()}function f(j){let W=["movie","book","podcast","playlist","song","video","article"];return j&&j.title&&j.mediaType&&W.includes(j.mediaType)}function I(j){if(F.innerHTML="",j.length===0){F.innerHTML="<p>No media items found.</p>";return}let W=[];if(j.forEach((Z)=>{let $=S(Z);if(F.appendChild($),window.contentSchemaGenerator){let q=window.contentSchemaGenerator.generateMediaItemSchema(Z);W.push(q)}}),window.contentSchemaGenerator&&W.length>0){let Z={"@context":"https://schema.org","@type":"ItemList",name:"Media Collection",numberOfItems:W.length,itemListElement:W.map(($,q)=>({"@type":"ListItem",position:q+1,item:$}))};window.contentSchemaGenerator.injectSchema(Z,"media-collection")}}function S(j){let W=document.createElement("div");W.className="media-card";let Z=j.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");W.id=Z,W.setAttribute("data-media-type",j.mediaType||"unknown"),W.setAttribute("role","article"),W.setAttribute("aria-label",`${j.title} - ${j.mediaType}`),W.setAttribute("tabindex","0");let $=document.createElement("div");$.className="media-cover-container";let q=document.createElement("img");if(q.className="media-cover",q.width=300,q.height=200,j.mediaType==="playlist")q.classList.add("playlist-cover");let X=j.title?`Cover image for ${j.title}`:"Media cover image";if(q.alt=X,q.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMjAwIiB2aWV3Qm94PSIwIDAgMzAwIDIwMCI+CiAgPHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI0Q4RDhEOCIvPgogIDx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM2NjYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5Mb2FkaW5nLi4uPC90ZXh0Pgo8L3N2Zz4=",j.cover){let Q=new Image;Q.src=j.cover,Q.onload=function(){q.src=j.cover,q.classList.add("loaded")},Q.onerror=function(){q.src="https://via.placeholder.com/300x200/2C5F5A/FFFFFF?text=No+Image"}}else q.src="https://via.placeholder.com/300x200/2C5F5A/FFFFFF?text=No+Image",q.classList.add("loaded");let N=document.createElement("div");N.className="media-type";let V=document.createElement("i");if(V.className=y(j.mediaType),N.appendChild(V),j.status&&j.status.toLowerCase()==="reading now"){let Q=document.createElement("div");Q.className="reading-now-badge",Q.textContent="Reading Now",$.appendChild(Q)}if(j.featured){let Q=document.createElement("div");Q.className="media-featured",Q.textContent=j.featured,$.appendChild(Q)}let w=document.createElement("div");w.className="media-overlay";let K=document.createElement("div");K.className="media-overlay-content";let M=document.createElement("h3");if(M.className="media-title",M.textContent=j.title,K.appendChild(M),j.author){let Q=document.createElement("div");if(Q.className="media-author",j.mediaType==="movie")Q.textContent=j.author?`Director: ${j.author}`:"";else if(j.mediaType==="playlist")Q.textContent=j.author?`Curator: ${j.author}`:"";else Q.textContent=j.author;K.appendChild(Q)}if(j.description){let Q=document.createElement("div");Q.className="media-description",Q.textContent=j.description,K.appendChild(Q)}if(j.mediaType==="playlist"&&j.date){let Q=document.createElement("div");Q.className="media-date-bottom",Q.textContent=j.date,K.appendChild(Q)}if(j.mediaType==="movie"){let Q=document.createElement("div");if(Q.className="movie-actions-container",j.ratings){if(j.ratings.rt){let J=document.createElement("a");J.href=j.ratings.rt.url,J.className="rating-logo rt-logo",J.target="_blank",J.rel="noopener noreferrer";let G=document.createElement("span");G.className="rt-tomato",G.textContent="\uD83C\uDF45";let O=document.createElement("span");O.className="score",O.textContent=j.ratings.rt.score,J.appendChild(G),J.appendChild(document.createTextNode(" ")),J.appendChild(O),Q.appendChild(J)}if(j.ratings.imdb){let J=document.createElement("a");J.href=j.ratings.imdb.url,J.className="rating-logo imdb-logo",J.target="_blank",J.rel="noopener noreferrer";let G=document.createElement("span");G.className="imdb-icon",G.textContent="IMDb";let O=document.createElement("span");O.className="score",O.textContent=j.ratings.imdb.score,J.appendChild(G),J.appendChild(document.createTextNode(" ")),J.appendChild(O),Q.appendChild(J)}}if(j.embedUrl){let J=document.createElement("div");J.className="trailer-container-inline";let G=document.createElement("button");G.className="trailer-button-inline",G.setAttribute("title","Watch Trailer");let O=document.createElement("i");O.className="fab fa-youtube",G.appendChild(O),G.addEventListener("click",function(z){z.stopPropagation();let R=K.querySelector(".trailer-embed");if(R){K.removeChild(R),G.innerHTML="";let h=document.createElement("i");h.className="fab fa-youtube",G.setAttribute("title","Watch Trailer"),G.appendChild(h);return}let H=document.createElement("div");H.className="trailer-embed";let U=document.createElement("iframe");U.width="100%",U.height="100%",U.src=j.embedUrl,U.title=`${j.title} Trailer`,U.setAttribute("frameborder","0"),U.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",U.allowFullscreen=!0,H.appendChild(U),K.appendChild(H),G.innerHTML="";let _=document.createElement("i");_.className="fas fa-times",G.setAttribute("title","Close Trailer"),G.appendChild(_)}),J.appendChild(G),Q.appendChild(J)}K.appendChild(Q)}if(j.mediaType==="playlist"&&j.embedUrl){let Q=document.createElement("div");Q.className="trailer-container";let J=document.createElement("button");J.className="trailer-button",J.setAttribute("title","Preview Playlist"),J.classList.add("playlist-button");let G=document.createElement("i");G.className="fab fa-youtube",J.appendChild(G),J.addEventListener("click",function(O){O.stopPropagation();let z=Q.querySelector(".trailer-embed");if(z){Q.removeChild(z),J.innerHTML="";let _=document.createElement("i");_.className="fab fa-youtube",J.setAttribute("title","Preview Playlist"),J.appendChild(_);return}let R=document.createElement("div");R.className="trailer-embed";let H=document.createElement("iframe");H.width="100%",H.height="100%",H.src=j.embedUrl,H.title=`${j.title} Trailer`,H.setAttribute("frameborder","0"),H.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",H.allowFullscreen=!0,R.appendChild(H),Q.appendChild(R),J.innerHTML="";let U=document.createElement("i");U.className="fas fa-times",J.setAttribute("title","Close Trailer"),J.appendChild(U)}),Q.appendChild(J),K.appendChild(Q)}if(j.rating){let Q=document.createElement("div");Q.className="media-rating";let J="★".repeat(Math.round(j.rating))+"☆".repeat(5-Math.round(j.rating));Q.textContent=J,K.appendChild(Q)}if(j.links&&j.links.length>0){let Q=document.createElement("div");Q.className=j.mediaType==="song"?"song-links":j.mediaType==="podcast"||j.mediaType==="playlist"?"podcast-links":"media-links",j.links.forEach((J)=>{let G=J.name&&J.name.toLowerCase()==="x"||J.label&&J.label.toLowerCase()==="x",O=J.icon&&(J.icon==="fab fa-x-twitter"||J.icon==="fab fa-twitter"),z=document.createElement("a");if(z.href=J.url,z.target="_blank",z.rel="noopener noreferrer",z.setAttribute("title",J.label||J.name||""),J.icon&&J.icon.includes("spotify"))z.className="spotify-link";else if(J.icon&&J.icon.includes("apple"))z.className="apple-link";else if(J.icon&&J.icon.includes("youtube"))z.className="youtube-link";else if(J.icon&&J.icon.includes("soundcloud"))z.className="soundcloud-link";else if(J.icon&&J.icon.includes("amazon"))z.className="amazon-link";else if(J.icon&&J.icon.includes("google"))z.className="google-link";else if(J.icon&&J.icon.includes("rss"))z.className="rss-link";else if(G)z.className="x-link";else z.className="media-link";if(G)z.innerHTML='<svg viewBox="0 0 120 120" width="1.5em" height="1.5em" fill="white" xmlns="http://www.w3.org/2000/svg" style="display:flex;align-items:center;justify-content:center;width:1.5em;height:1.5em;"><rect width="120" height="120" rx="24" fill="black"/><path d="M85.5 34H99L74.5 62.5L102 99H80.5L62.5 76.5L41.5 99H28L54.5 68.5L28 34H50L66 54.5L85.5 34ZM81.5 92H87.5L49 41H42.5L81.5 92Z" fill="white"/></svg>';else if(J.icon){let R=document.createElement("i");R.className=J.icon,z.appendChild(R)}Q.appendChild(z)}),K.appendChild(Q)}return w.appendChild(K),W.addEventListener("keydown",function(Q){if(Q.key==="Enter"||Q.key===" ")Q.preventDefault(),W.classList.add("keyboard-focus"),setTimeout(()=>W.classList.remove("keyboard-focus"),200)}),$.appendChild(q),$.appendChild(N),W.appendChild($),W.appendChild(w),W}let u={podcast:"fas fa-podcast",playlist:"fas fa-music",book:"fas fa-book",song:"fas fa-music",video:"fas fa-video",movie:"fas fa-film",article:"fas fa-newspaper"};function y(j){return u[j]||"fas fa-file-alt"}function g(j){if(!j)return"";let W=P(j);if(!W)return j;return W.toLocaleDateString("en-US",{year:"numeric",month:"long"})}function P(j){if(!j)return null;let W=/^([A-Za-z]+)\s+(\d{4})$/,Z=j.match(W);if(Z){let q=["january","february","march","april","may","june","july","august","september","october","november","december"],X=Z[1].toLowerCase(),N=parseInt(Z[2]),V=-1;for(let w=0;w<q.length;w++)if(q[w].startsWith(X.substring(0,3))){V=w;break}if(V!==-1)return new Date(N,V,1)}let $=new Date(j);if(!isNaN($.getTime()))return $;return null}function L(){let j=x.value,W=A.value,Z=[...Y];if(j!=="all")Z=Z.filter(($)=>$.mediaType===j);Z.sort(($,q)=>{switch(W){case"date-asc":let X=P($.dateAdded)||P($.date)||new Date(0),N=P(q.dateAdded)||P(q.date)||new Date(0);return X.getTime()-N.getTime();case"date-desc":let V=P($.dateAdded)||P($.date)||new Date(0);return(P(q.dateAdded)||P(q.date)||new Date(0)).getTime()-V.getTime();case"newest-added":let K=P($.dateAdded)||new Date(0);return(P(q.dateAdded)||new Date(0)).getTime()-K.getTime();case"title-asc":return($.title||"").localeCompare(q.title||"");case"title-desc":return(q.title||"").localeCompare($.title||"");default:return 0}}),I(Z),C(Z.length,Y.length)}function C(j,W){let Z=document.querySelector(".results-count");if(Z)Z.remove();if(j!==W){let $=document.createElement("div");$.className="results-count";let q=`Showing ${j} of ${W} items`,X=x.value;if(X!=="all"){let V=X.charAt(0).toUpperCase()+X.slice(1)+"s";q+=` in ${V}`}$.textContent=q,document.querySelector(".media-filters").insertAdjacentElement("afterend",$)}}x.addEventListener("change",L),A.addEventListener("change",L),v()});

//# debugId=5CE17D7225D6B57E64756E2164756E21
