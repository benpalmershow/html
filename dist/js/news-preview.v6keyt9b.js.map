{
  "version": 3,
  "sources": ["../../js/news-preview.js"],
  "sourcesContent": [
    "/**\n * News Preview Cards JavaScript\n * Handles preview text truncation and Read More/Read Less functionality\n */\n\n// Dummy function to prevent errors from old onclick handlers\nfunction toggleCard() {\n    // Cards are now converted to new format, this function is obsolete\n}\n\n// Initialize immediately if DOM is ready, otherwise wait for DOMContentLoaded\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', function() {\n        initializePreviewCards();\n    });\n} else {\n    initializePreviewCards();\n}\n\nfunction initializePreviewCards() {\n    // Convert existing cards to preview format\n    const existingCards = document.querySelectorAll('.card-header[onclick*=\"toggleCard\"]');\n\n    existingCards.forEach(convertToPreviewCard);\n\n    // Initialize Read More buttons\n    const readMoreBtns = document.querySelectorAll('.read-more-btn');\n    readMoreBtns.forEach(btn => {\n        btn.addEventListener('click', handleReadMoreClick);\n    });\n\n// Initialize filter functionality after conversion\nupdateFilterFunctionality();\n}\n\nfunction convertToPreviewCard(cardHeader) {\n    const cardContent = cardHeader.nextElementSibling;\n    if (!cardContent || !cardContent.classList.contains('card-content')) return;\n    \n    // Extract card data\n    const time = cardHeader.querySelector('time');\n    const icon = cardHeader.querySelector('.card-icon');\n    const title = cardHeader.querySelector('h1');\n    const categoryBadge = cardHeader.querySelector('.category-badge');\n    \n    // Get first paragraph or section for preview\n    const cardInner = cardContent.querySelector('.card-inner');\n    const previewText = generatePreviewText(cardInner);\n    \n    // Create new preview card structure\n    const newCard = document.createElement('div');\n    newCard.className = 'news-card';\n    newCard.setAttribute('data-category', categoryBadge ? categoryBadge.textContent.toLowerCase() : 'all');\n    \n    // Clean the title HTML to remove any badges\n    let cleanTitle = '';\n    if (title) {\n        const titleClone = title.cloneNode(true);\n        // Remove any badges from the title\n        const badges = titleClone.querySelectorAll('.category-badge');\n        badges.forEach(badge => badge.remove());\n        cleanTitle = titleClone.innerHTML.trim();\n    }\n    \n    newCard.innerHTML = `\n        <div class=\"news-card-header\">\n            <i data-lucide=\"${icon ? icon.getAttribute('data-lucide') : 'file-text'}\" class=\"news-card-icon\"></i>\n            <div class=\"news-card-meta\">\n                <div class=\"news-card-date\">${time ? time.textContent : ''}</div>\n                <h2 class=\"news-card-title\">${cleanTitle}</h2>\n            </div>\n            <div class=\"news-card-badge-corner\">\n                ${categoryBadge ? categoryBadge.outerHTML : ''}\n            </div>\n        </div>\n        <div class=\"news-card-content\">\n            <div class=\"news-card-preview\">${previewText}</div>\n            <div class=\"news-card-actions\">\n                <button class=\"read-more-btn\" data-card-id=\"${generateCardId()}\">\n                    <span class=\"btn-text\">Read More</span>\n                    <i data-lucide=\"chevron-down\"></i>\n                </button>\n            </div>\n            <div class=\"news-card-full\">\n                ${cardInner ? cardInner.innerHTML : ''}\n            </div>\n        </div>\n    `;\n    \n    // Replace old card structure\n    const cardContainer = cardHeader.parentNode;\n    cardContainer.insertBefore(newCard, cardHeader);\n    cardContainer.removeChild(cardHeader);\n    cardContainer.removeChild(cardContent);\n    \n    // Reinitialize Lucide icons for the new card\n    if (typeof lucide !== 'undefined') {\n        lucide.createIcons();\n    }\n}\n\nfunction generatePreviewText(cardInner) {\n    if (!cardInner) return 'Click to read more...';\n    \n    // Get the first meaningful text content\n    let previewText = '';\n    const firstSection = cardInner.querySelector('.section, .highlights, p, div');\n    \n    if (firstSection) {\n        // Extract plain text, removing HTML tags\n        const tempDiv = document.createElement('div');\n        tempDiv.innerHTML = firstSection.innerHTML;\n        \n        // Remove any nested sections, tables, or complex elements for preview\n        const complexElements = tempDiv.querySelectorAll('table, .table-container, .chart-container, blockquote, .case-questions');\n        complexElements.forEach(el => el.remove());\n        \n        previewText = tempDiv.textContent || tempDiv.innerText || '';\n        \n        // Clean up and truncate\n        previewText = previewText.trim().replace(/\\s+/g, ' ');\n        \n        // Truncate to reasonable length\n        if (previewText.length > 200) {\n            previewText = previewText.substring(0, 200).trim();\n            // Try to end at a word boundary\n            const lastSpace = previewText.lastIndexOf(' ');\n            if (lastSpace > 150) {\n                previewText = previewText.substring(0, lastSpace);\n            }\n            previewText += '...';\n        }\n    }\n    \n    return previewText || 'Click to read the full article...';\n}\n\nfunction handleReadMoreClick(event) {\n    const btn = event.currentTarget;\n    const card = btn.closest('.news-card');\n    const fullContent = card.querySelector('.news-card-full');\n    const btnText = btn.querySelector('.btn-text');\n    const btnIcon = btn.querySelector('i');\n    \n    if (fullContent.classList.contains('show')) {\n        // Collapse\n        fullContent.classList.remove('show');\n        btnText.textContent = 'Read More';\n        btn.classList.remove('expanded');\n        \n        // Scroll back to card top\n        card.scrollIntoView({ behavior: 'smooth', block: 'start' });\n    } else {\n        // Expand\n        fullContent.classList.add('show');\n        btnText.textContent = 'Read Less';\n        btn.classList.add('expanded');\n        \n        // Reinitialize any dynamic content (charts, etc.)\n        setTimeout(() => {\n            if (typeof lucide !== 'undefined') {\n                lucide.createIcons();\n            }\n        }, 100);\n    }\n}\n\nfunction generateCardId() {\n    return 'card_' + Math.random().toString(36).substr(2, 9);\n}\n\n// Update existing filter functionality to work with new card structure\nfunction updateFilterFunctionality() {\n    const filterBtns = document.querySelectorAll('.filter-btn');\n    \n    filterBtns.forEach(btn => {\n        btn.addEventListener('click', function() {\n            const category = this.dataset.category;\n            \n            // Update active button\n            filterBtns.forEach(b => b.classList.remove('active'));\n            this.classList.add('active');\n            \n            // Filter cards\n            const cards = document.querySelectorAll('.news-card');\n            cards.forEach(card => {\n                const cardCategory = card.dataset.category;\n                \n                if (category === 'all' || cardCategory === category || \n                    (cardCategory && cardCategory.includes(category))) {\n                    card.style.display = 'block';\n                } else {\n                    card.style.display = 'none';\n                }\n            });\n        });\n    });\n}\n\n// Filter functionality is now initialized in initializePreviewCards after conversion"
  ],
  "mappings": "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",
  "debugId": "1B0B492AB2F7FC9964756E2164756E21",
  "names": []
}