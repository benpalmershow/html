document.addEventListener("DOMContentLoaded",()=>{let C=document.getElementById("announcements-container");if(!C)return;C.innerHTML="";function F(k){let B=new Date(k);if(isNaN(B))return"recently";let q=new Date-B,x=Math.floor(q/60000);if(x<1)return"just now";if(x<60)return x===1?"1 minute ago":`${x} minutes ago`;let z=Math.floor(x/60);if(z<24)return z===1?"1 hour ago":`${z} hours ago`;let E=Math.floor(z/24);return E===1?"1 day ago":`${E} days ago`}function G(k){if(!k||k.length===0){C.innerHTML='<div class="empty-state">No announcements yet.</div>';return}if(C.innerHTML=k.map((j)=>`
      <div class="announcement-card" data-date="${j.date}">
        <time class="post-time">${F(j.date)}</time>
        <div class="content">${j.content||""}</div>
      </div>
    `).join(""),C.querySelectorAll(".announcement-card").forEach((j)=>{j.querySelectorAll("script").forEach((x)=>{let z=document.createElement("script");if(z.textContent=x.textContent,x.src)z.src=x.src;document.body.appendChild(z)})}),window.lucide)window.lucide.createIcons();setInterval(()=>{document.querySelectorAll(".announcement-card").forEach((j)=>{let q=j.getAttribute("data-date");if(q)j.querySelector(".post-time").textContent=F(q)})},60000)}fetch("json/posts.json?v="+Date.now()).then((k)=>{if(!k.ok)throw Error("Failed to load posts");return k.json()}).then((k)=>{if(!Array.isArray(k))throw Error("Invalid posts format");let B=k.map((j)=>{if(j.file)return fetch(j.file+"?v="+Date.now()).then((q)=>q.text()).then((q)=>{let x=q.split(/^---$/m),z=q.trim();if(x.length>=3)z=x.slice(2).join("---").trim();else if(x.length===2&&!q.trimStart().startsWith("---"))z=q.trim();try{let E=window.marked?.parse?.(z)||z;return{...j,content:E}}catch(E){return console.warn("Failed to parse markdown for",j.file,E),j}}).catch((q)=>{return console.warn("Failed to fetch",j.file),j});return Promise.resolve(j)});return Promise.all(B)}).then((k)=>{let B=k.filter((j)=>j?.date&&(j.content||j.file));G(B)}).catch((k)=>{console.error("Error loading posts:",k),C.innerHTML='<div class="error-state">Unable to load announcements.</div>'})});

//# debugId=451005A36211099964756E2164756E21
