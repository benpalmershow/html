{
  "version": 3,
  "sources": ["../../js/posts-loader.js"],
  "sourcesContent": [
    "document.addEventListener('DOMContentLoaded', () => {\n  const feed = document.getElementById('announcements-container');\n  if (!feed) return;\n\n  feed.innerHTML = '';\n\n  function formatTimeAgo(dateString) {\n    const postDate = new Date(dateString);\n    if (isNaN(postDate)) return 'recently';\n    \n    const now = new Date();\n    const diffMs = now - postDate;\n    const diffMins = Math.floor(diffMs / 60000);\n    \n    if (diffMins < 1) return 'just now';\n    if (diffMins < 60) return diffMins === 1 ? '1 minute ago' : `${diffMins} minutes ago`;\n    \n    const diffHours = Math.floor(diffMins / 60);\n    if (diffHours < 24) return diffHours === 1 ? '1 hour ago' : `${diffHours} hours ago`;\n    \n    const diffDays = Math.floor(diffHours / 24);\n    return diffDays === 1 ? '1 day ago' : `${diffDays} days ago`;\n  }\n\n  function renderPosts(posts) {\n    if (!posts || posts.length === 0) {\n      feed.innerHTML = '<div class=\"empty-state\">No announcements yet.</div>';\n      return;\n    }\n\n    feed.innerHTML = posts.map(p => `\n      <div class=\"announcement-card\" data-date=\"${p.date}\">\n        <time class=\"post-time\">${formatTimeAgo(p.date)}</time>\n        <div class=\"content\">${p.content || ''}</div>\n      </div>\n    `).join('');\n\n    // Execute embedded scripts in content\n    const cards = feed.querySelectorAll('.announcement-card');\n    cards.forEach(card => {\n      const scripts = card.querySelectorAll('script');\n      scripts.forEach(oldScript => {\n        const newScript = document.createElement('script');\n        newScript.textContent = oldScript.textContent;\n        if (oldScript.src) newScript.src = oldScript.src;\n        document.body.appendChild(newScript);\n      });\n    });\n\n    // Reinitialize lucide icons\n    if (window.lucide) {\n      window.lucide.createIcons();\n    }\n\n    // Update times every minute\n    setInterval(() => {\n      document.querySelectorAll('.announcement-card').forEach(card => {\n        const dateStr = card.getAttribute('data-date');\n        if (dateStr) {\n          card.querySelector('.post-time').textContent = formatTimeAgo(dateStr);\n        }\n      });\n    }, 60000);\n  }\n\n  fetch('json/posts.json?v=' + Date.now())\n    .then(r => {\n      if (!r.ok) throw new Error('Failed to load posts');\n      return r.json();\n    })\n    .then(posts => {\n      if (!Array.isArray(posts)) throw new Error('Invalid posts format');\n      \n      // For posts with files, fetch and parse markdown\n      const promises = posts.map(post => {\n        if (post.file) {\n          return fetch(post.file + '?v=' + Date.now())\n            .then(r => r.text())\n            .then(md => {\n              const parts = md.split(/^---$/m);\n              let contentMd = md.trim();\n              \n              // Skip frontmatter if it exists (content between first and second ---)\n              if (parts.length >= 3) {\n                contentMd = parts.slice(2).join('---').trim();\n              } else if (parts.length === 2 && !md.trimStart().startsWith('---')) {\n                // If we have a split but frontmatter isn't at the start, use original\n                contentMd = md.trim();\n              }\n              \n              try {\n                const contentHtml = window.marked?.parse?.(contentMd) || contentMd;\n                return { ...post, content: contentHtml };\n              } catch (e) {\n                console.warn('Failed to parse markdown for', post.file, e);\n                return post;\n              }\n            })\n            .catch(err => {\n              console.warn('Failed to fetch', post.file);\n              return post;\n            });\n        }\n        return Promise.resolve(post);\n      });\n\n      return Promise.all(promises);\n    })\n    .then(posts => {\n      const validPosts = posts.filter(p => p?.date && (p.content || p.file));\n      renderPosts(validPosts);\n    })\n    .catch(err => {\n      console.error('Error loading posts:', err);\n      feed.innerHTML = '<div class=\"error-state\">Unable to load announcements.</div>';\n    });\n});\n"
  ],
  "mappings": "AAAA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,IAAM,EAAO,SAAS,eAAe,yBAAyB,EAC9D,GAAI,CAAC,EAAM,OAEX,EAAK,UAAY,GAEjB,SAAS,CAAa,CAAC,EAAY,CACjC,IAAM,EAAW,IAAI,KAAK,CAAU,EACpC,GAAI,MAAM,CAAQ,EAAG,MAAO,WAG5B,IAAM,EADM,IAAI,KACK,EACf,EAAW,KAAK,MAAM,EAAS,KAAK,EAE1C,GAAI,EAAW,EAAG,MAAO,WACzB,GAAI,EAAW,GAAI,OAAO,IAAa,EAAI,eAAiB,GAAG,gBAE/D,IAAM,EAAY,KAAK,MAAM,EAAW,EAAE,EAC1C,GAAI,EAAY,GAAI,OAAO,IAAc,EAAI,aAAe,GAAG,cAE/D,IAAM,EAAW,KAAK,MAAM,EAAY,EAAE,EAC1C,OAAO,IAAa,EAAI,YAAc,GAAG,aAG3C,SAAS,CAAW,CAAC,EAAO,CAC1B,GAAI,CAAC,GAAS,EAAM,SAAW,EAAG,CAChC,EAAK,UAAY,uDACjB,OAuBF,GApBA,EAAK,UAAY,EAAM,IAAI,KAAK;AAAA,kDACc,EAAE;AAAA,kCAClB,EAAc,EAAE,IAAI;AAAA,+BACvB,EAAE,SAAW;AAAA;AAAA,KAEvC,EAAE,KAAK,EAAE,EAGI,EAAK,iBAAiB,oBAAoB,EAClD,QAAQ,KAAQ,CACJ,EAAK,iBAAiB,QAAQ,EACtC,QAAQ,KAAa,CAC3B,IAAM,EAAY,SAAS,cAAc,QAAQ,EAEjD,GADA,EAAU,YAAc,EAAU,YAC9B,EAAU,IAAK,EAAU,IAAM,EAAU,IAC7C,SAAS,KAAK,YAAY,CAAS,EACpC,EACF,EAGG,OAAO,OACT,OAAO,OAAO,YAAY,EAI5B,YAAY,IAAM,CAChB,SAAS,iBAAiB,oBAAoB,EAAE,QAAQ,KAAQ,CAC9D,IAAM,EAAU,EAAK,aAAa,WAAW,EAC7C,GAAI,EACF,EAAK,cAAc,YAAY,EAAE,YAAc,EAAc,CAAO,EAEvE,GACA,KAAK,EAGV,MAAM,qBAAuB,KAAK,IAAI,CAAC,EACpC,KAAK,KAAK,CACT,GAAI,CAAC,EAAE,GAAI,MAAU,MAAM,sBAAsB,EACjD,OAAO,EAAE,KAAK,EACf,EACA,KAAK,KAAS,CACb,GAAI,CAAC,MAAM,QAAQ,CAAK,EAAG,MAAU,MAAM,sBAAsB,EAGjE,IAAM,EAAW,EAAM,IAAI,KAAQ,CACjC,GAAI,EAAK,KACP,OAAO,MAAM,EAAK,KAAO,MAAQ,KAAK,IAAI,CAAC,EACxC,KAAK,KAAK,EAAE,KAAK,CAAC,EAClB,KAAK,KAAM,CACV,IAAM,EAAQ,EAAG,MAAM,QAAQ,EAC3B,EAAY,EAAG,KAAK,EAGxB,GAAI,EAAM,QAAU,EAClB,EAAY,EAAM,MAAM,CAAC,EAAE,KAAK,KAAK,EAAE,KAAK,EACvC,QAAI,EAAM,SAAW,GAAK,CAAC,EAAG,UAAU,EAAE,WAAW,KAAK,EAE/D,EAAY,EAAG,KAAK,EAGtB,GAAI,CACF,IAAM,EAAc,OAAO,QAAQ,QAAQ,CAAS,GAAK,EACzD,MAAO,IAAK,EAAM,QAAS,CAAY,EACvC,MAAO,EAAG,CAEV,OADA,QAAQ,KAAK,+BAAgC,EAAK,KAAM,CAAC,EAClD,GAEV,EACA,MAAM,KAAO,CAEZ,OADA,QAAQ,KAAK,kBAAmB,EAAK,IAAI,EAClC,EACR,EAEL,OAAO,QAAQ,QAAQ,CAAI,EAC5B,EAED,OAAO,QAAQ,IAAI,CAAQ,EAC5B,EACA,KAAK,KAAS,CACb,IAAM,EAAa,EAAM,OAAO,KAAK,GAAG,OAAS,EAAE,SAAW,EAAE,KAAK,EACrE,EAAY,CAAU,EACvB,EACA,MAAM,KAAO,CACZ,QAAQ,MAAM,uBAAwB,CAAG,EACzC,EAAK,UAAY,+DAClB,EACJ",
  "debugId": "451005A36211099964756E2164756E21",
  "names": []
}