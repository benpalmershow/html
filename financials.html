<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script defer src="/_vercel/insights/script.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <link rel="stylesheet" href="/css/body.css">
    <title>Financials at a Glance | Howdy, Stranger</title>
    <meta name="description" content="Financial overview of SEZL, PAYS, and DAVE by HowdyStranger.">
  </head>
  <body>
    <header class="site-header">
      <div class="logo-container">
        <img src="images/logo.png" alt="Howdy Stranger" class="logo">
      </div>
    </header>
    <nav class="nav-links"></nav>
    <div class="content">
      <h2>All Indices</h2>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Index</th>
              <th>March</th>
              <th>April</th>
              <th>May</th>
              <th>June</th>
              <th>Change (%)</th>
            </tr>
          </thead>
          <tbody id="indicesTableBody"></tbody>
        </table>
      </div>
    </div>
    <script>
      function populateIndicesTable(indices) {
        const tbody = document.getElementById("indicesTableBody");
        tbody.innerHTML = "";
        indices.forEach(data => {
          const row = tbody.insertRow();
          // Always use the url if present
          if (data.url) {
            row.insertCell().innerHTML = `<a href="${data.url}" target="_blank" rel="noopener">${data.name}</a>`;
          } else {
            row.insertCell().textContent = data.name;
          }
          row.insertCell().textContent = data.march !== undefined ? data.march : '';
          row.insertCell().textContent = data.april !== undefined ? data.april : '';
          row.insertCell().textContent = data.may !== undefined ? data.may : '';
          row.insertCell().textContent = data.june !== undefined ? data.june : '';
          row.insertCell().textContent = data.change !== undefined ? data.change : '';
          for (let i = 1; i < row.cells.length; i++) row.cells[i].className = "number";
        });
      }

      document.addEventListener("DOMContentLoaded", () => {
        fetch('json/financials-data.json')
          .then((response) => response.json())
          .then(data => {
            populateIndicesTable(data.indices);
          })
          .catch(err => {
            console.warn("Could not load external data, using built-in staticData.");
          });

        const hamburger = document.querySelector(".hamburger");
        const navLinks = document.querySelector(".nav-links");
        if (hamburger && navLinks) {
          hamburger.addEventListener("click", () => {
            navLinks.classList.toggle("active");
          });
        }
      });
    </script>
    <script src="/js/nav.js"></script>
  </body>
</html>