<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script defer src="/_vercel/insights/script.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <link rel="stylesheet" href="/css/body.css">
    <title>Financials at a Glance | Howdy, Stranger</title>
    <meta name="description" content="Financial overview of SEZL, PAYS, and DAVE by HowdyStranger.">
  </head>
  <body>
    <header class="site-header">
      <div class="logo-container">
        <img src="images/logo.png" alt="Howdy Stranger" class="logo">
      </div>
    </header>
    <nav class="nav-links"></nav>
    <div class="content">
      <div class="card">
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Index</th>
                <th>March</th>
                <th>April</th>
                <th>May</th>
                <th>June</th>
                <th>Change (%)</th>
              </tr>
            </thead>
            <tbody id="indicesTableBody"></tbody>
          </table>
        </div>
        <p style="font-size: 0.85em; color: var(--text-secondary, #666); margin-top: 1em;">
          This table presents key U.S. economic and housing indices for the past several months. 
          Each row links to the most authoritative source available for that index (prioritizing .gov and official sites). 
          The "Change (%)" column shows the percent change from April to May where data is available. 
          All values are sourced from official releases or reputable providers and are updated as new data becomes available.
        </p>
      </div>
    </div>
    <script>
      function populateIndicesTable(indices) {
  const tbody = document.getElementById("indicesTableBody");
  tbody.innerHTML = "";
  indices.forEach(data => {
    const row = tbody.insertRow();
    // Always use the url if present
    if (data.url) {
      row.insertCell().innerHTML = `<a href="${data.url}" target="_blank" rel="noopener">${data.name}</a>`;
    } else {
      row.insertCell().textContent = data.name;
    }
    row.insertCell().textContent = data.march !== undefined ? data.march : '';
    row.insertCell().textContent = data.april !== undefined ? data.april : '';
    row.insertCell().textContent = data.may !== undefined ? data.may : '';
    row.insertCell().textContent = data.june !== undefined ? data.june : '';

  // Add Change (%) column
  const changeCell = row.insertCell();
  const inverseIndices = ["30yr Fixed", "10 Year"];
  const isInverse = inverseIndices.includes(data.name);

    if (typeof data.change === "number" && !isNaN(data.change)) {
      if (isInverse) {
        if (data.change > 0) {
          changeCell.innerHTML = `<span style="color: #c0392b;">&#9650; ${data.change}</span>`;
        } else if (data.change < 0) {
          changeCell.innerHTML = `<span style="color: #1a7f3c;">&#9660; ${data.change}</span>`;
        } else {
          changeCell.textContent = data.change;
        }
      } else {
        if (data.change > 0) {
          changeCell.innerHTML = `<span style="color: #1a7f3c;">&#9650; ${data.change}</span>`;
        } else if (data.change < 0) {
          changeCell.innerHTML = `<span style="color: #c0392b;">&#9660; ${data.change}</span>`;
        } else {
          changeCell.textContent = data.change;
        }
      }
    } else {
      changeCell.textContent = data.change !== undefined ? data.change : '';
    }

    for (let i = 1; i < row.cells.length; i++) row.cells[i].className = "number";
  });
}

      document.addEventListener("DOMContentLoaded", () => {
        fetch('json/financials-data.json')
          .then((response) => response.json())
          .then(data => {
            populateIndicesTable(data.indices);
          })
          .catch(err => {
            console.warn("Could not load external data, using built-in staticData.");
          });

        const hamburger = document.querySelector(".hamburger");
        const navLinks = document.querySelector(".nav-links");
        if (hamburger && navLinks) {
          hamburger.addEventListener("click", () => {
            navLinks.classList.toggle("active");
          });
        }
      });
    </script>
  
    <script src="/js/nav.js"></script>
  </body>
</html>