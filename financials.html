<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script defer src="/_vercel/insights/script.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <link rel="stylesheet" href="/css/body.css">
    <title>Financials at a Glance | Howdy, Stranger</title>
    <meta name="description" content="Financial overview of SEZL, PAYS, DAVE, and PRLTO by HowdyStranger.">
  </head>
  <body>
    <nav class="nav-links">
      <a class="nav-link" href="index.html">Home</a>
      <a class="nav-link" href="watch.html">ðŸŽ¥watch</a>
      <a class="nav-link" href="read.html">ðŸ“šread</a>
      <a class="nav-link" href="listen.html">ðŸ“»listen</a>
    </nav>
    <div class="content">
      <h1>Financials at a Glance</h1>
      <p id="timestamp">Updated as of 01:24 PM PDT, Thursday, May 22, 2025.</p>
      <p>Below is a snapshot of key financial metrics for selected companies.</p>
      <table>
        <thead>
          <tr>
            <th>Company</th>
            <th>Revenue</th>
            <th>Gross Margin</th>
            <th>EBITDA</th>
            <th>Net Income</th>
            <th>Market Cap</th>
            <th>Cash</th>
            <th>Debt</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <p>Notes: All figures are in USD unless otherwise specified (e.g., CAD for PRLTO market cap). YoY growth reflects performance compared to the previous year. Verify data by clicking the company ticker to view SEC filings.</p>
    </div>
    <script>
      async function fetchFinancialData(ticker) {
        const apiKey = "HX66SP8T1PT1AEJK";
        const incomeUrl = `https://www.alphavantage.co/query?function=INCOME_STATEMENT&symbol=${ticker}&apikey=${apiKey}`;
        const balanceUrl = `https://www.alphavantage.co/query?function=BALANCE_SHEET&symbol=${ticker}&apikey=${apiKey}`;
        const overviewUrl = `https://www.alphavantage.co/query?function=OVERVIEW&symbol=${ticker}&apikey=${apiKey}`;

        try {
          const [incomeRes, balanceRes, overviewRes] = await Promise.all([
            fetch(incomeUrl).then(res => res.json()),
            fetch(balanceUrl).then(res => res.json()),
            fetch(overviewUrl).then(res => res.json())
          ]);

          const revenue = incomeRes.annualReports?.[0]?.totalRevenue || "N/A";
          const revenueGrowth = overviewRes.RevenueGrowth || "N/A";
          const grossMargin = overviewRes.GrossMarginTTM || "N/A";
          const ebitda = incomeRes.annualReports?.[0]?.ebitda || "N/A";
          const netIncome = incomeRes.annualReports?.[0]?.netIncome || "N/A";
          const marketCap = overviewRes.MarketCapitalization || "N/A";
          const cash = balanceRes.annualReports?.[0]?.cashAndCashEquivalentsAtCarryingValue || "N/A";
          const debt = balanceRes.annualReports?.[0]?.longTermDebt || "N/A";
          const sourceUrl = `https://www.sec.gov/edgar/search/#/q=${ticker}`;

          return { revenue, revenueGrowth, grossMargin, ebitda, netIncome, marketCap, cash, debt, sourceUrl };
        } catch (error) {
          console.error(`Error fetching data for ${ticker}:`, error);
          return null;
        }
      }

      async function populateTable() {
        const companies = ["SEZL", "PAYS", "DAVE", "PRLTO"];
        const tbody = document.querySelector("tbody");

        for (const ticker of companies) {
          const data = await fetchFinancialData(ticker);
          if (data) {
            const row = tbody.insertRow();
            const cell0 = row.insertCell();
            cell0.innerHTML = `<a href="${data.sourceUrl}" target="_blank">${ticker}</a>`;
            row.insertCell().textContent = data.revenue ? `${(data.revenue / 1e6).toFixed(0)}M, ${data.revenueGrowth ? '+' + data.revenueGrowth + '% yoy' : ''}` : "N/A";
            row.insertCell().textContent = data.grossMargin ? `${data.grossMargin}%` : "N/A";
            row.insertCell().textContent = data.ebitda ? `${(data.ebitda / 1e6).toFixed(1)}M` : "N/A";
            row.insertCell().textContent = data.netIncome ? `${(data.netIncome / 1e6).toFixed(1)}M` : "N/A";
            row.insertCell().textContent = data.marketCap ? `${(data.marketCap / 1e9).toFixed(2)}B` : "N/A";
            row.insertCell().textContent = data.cash ? `${(data.cash / 1e6).toFixed(1)}M` : "N/A";
            row.insertCell().textContent = data.debt ? `${(data.debt / 1e6).toFixed(1)}M` : "N/A";
            row.cells[1].className = "number";
            row.cells[2].className = "number";
            row.cells[3].className = "number";
            row.cells[4].className = "number";
            row.cells[5].className = "number";
            row.cells[6].className = "number";
            row.cells[7].className = "number";
          }
        }

        const timestamp = document.getElementById("timestamp");
        timestamp.textContent = `Updated as of ${new Date().toLocaleString("en-US", { timeZone: "America/Los_Angeles" })}.`;
      }
      document.addEventListener("DOMContentLoaded", populateTable);
    </script>
  </body>
</html>