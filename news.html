<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-DWEVPGLJDP"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-DWEVPGLJDP');
  </script>
  <meta charset="UTF-8">
  <meta name="last-commit" content="2025-06-12 15:53:59 -0700">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Prevent Caching -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">

  <meta name="description" content="Breaking news and latest headlines - The Ben Palmer Show hosted by HowdyStranger.">
  <script>
    window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
  </script>
  <script defer src="/_vercel/insights/script.js"></script>
  <script defer src="@vercel/speed-insights/script.js"></script>
  <link rel="preload" href="css/body.css" as="style">
  <link rel="stylesheet" href="css/dark-mode.css">
  <link rel="stylesheet" href="css/body.css?v=20250927">
  <link rel="stylesheet" href="css/dark-mode.css">
  <link rel="stylesheet" href="css/news.css?v=20250927">
  <link rel="stylesheet" href="css/newspaper-titles.css">
  <link rel="stylesheet" href="https://unpkg.com/lucide@latest">
  <style>
    /* Page Title Styling */
    .page-title {
      font-size: 0.75rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      font-weight: 500;
      text-align: center;
      margin: 0.5rem 0 1.5rem 0;
      opacity: 0.6;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .page-icon {
      width: 20px;
      height: 20px;
    }

    /* Improved Layout Enhancements */
    .content {
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }

    /* Better spacing between cards */
    .card-header {
      margin-bottom: 0.75rem !important;
    }

    /* Section separators */
    .section + .section {
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 1px solid rgba(0, 0, 0, 0.1);
    }

    /* Add subtle fade-in animation */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .card-header {
      animation: fadeInUp 0.6s ease-out;
      animation-fill-mode: both;
    }

    .card-header:nth-child(1) { animation-delay: 0.1s; }
    .card-header:nth-child(2) { animation-delay: 0.2s; }
    .card-header:nth-child(3) { animation-delay: 0.3s; }
    .card-header:nth-child(4) { animation-delay: 0.4s; }
    .card-header:nth-child(5) { animation-delay: 0.5s; }

    /* Better mobile spacing */
    @media (max-width: 768px) {
      .content {
        gap: 1.5rem;
      }

      .filter-buttons {
        margin: 1rem 0 1.5rem !important;
      }
    }

    /* Position badges in upper right corner for full articles */
    .article-content {
      position: relative;
    }

    .article-content .category-badge {
      position: absolute;
      top: 1rem;
      right: 1rem;
      z-index: 10;
    }

    /* Article rendering styles */
    .article-content {
      max-width: 900px;
      margin: 2rem auto;
      padding: 2rem;
      background: var(--card-background);
      border-radius: 8px;
      line-height: 1.6;
    }

    .article-content h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: var(--text-primary);
    }

    .article-content h2 {
      font-size: 1.8rem;
      margin-top: 2rem;
      margin-bottom: 1rem;
      color: var(--text-primary);
      border-bottom: 2px solid var(--border-color);
      padding-bottom: 0.5rem;
    }

    .article-content h3 {
      font-size: 1.4rem;
      margin-top: 1.5rem;
      margin-bottom: 0.75rem;
      color: var(--text-secondary);
    }

    .article-content p {
      margin-bottom: 1rem;
      color: var(--text-primary);
    }

    .article-content ul, .article-content ol {
      margin: 1rem 0 1rem 2rem;
    }

    .article-content li {
      margin-bottom: 0.5rem;
      color: var(--text-primary);
    }

    .article-content code {
      background: var(--bg-secondary);
      padding: 0.2rem 0.4rem;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
      font-size: 0.9em;
    }

    .article-content pre {
      background: var(--bg-secondary);
      padding: 1rem;
      border-radius: 6px;
      overflow-x: auto;
    }

    .article-content blockquote {
      border-left: 4px solid var(--accent-color);
      padding-left: 1rem;
      margin: 1rem 0;
      font-style: italic;
      color: var(--text-secondary);
    }

    /* Table styling for earnings reports */
    .article-content table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5rem 0;
      font-size: 0.9rem;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .article-content th {
      background: var(--accent-color);
      color: white;
      padding: 0.75rem;
      text-align: left;
      font-weight: 600;
    }

    /* Dark mode table headers for better contrast */
    [data-theme="dark"] .article-content th {
      background: var(--color-gray-700);
      color: var(--text-secondary);
    }

    .article-content td {
      padding: 0.75rem;
      border-bottom: 1px solid var(--border-color);
    }

    .article-content tbody tr:hover {
      background: var(--bg-secondary);
    }

    /* Color-code growth/decline in tables */
    .article-content strong {
      font-weight: 600;
    }

    .article-meta {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border-color);
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .back-button {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: var(--accent-color);
      color: white;
      border-radius: 6px;
      text-decoration: none;
      margin-bottom: 1rem;
      transition: background 0.2s;
    }

    .back-button:hover {
      background: var(--accent-color-dark);
    }

    .back-to-top {
      text-align: center;
      margin-top: 2rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border-color);
    }

    .back-to-top a {
      display: inline-block;
      padding: 0.75rem 1.5rem;
      background: var(--accent-color);
      color: white;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 600;
      transition: background 0.2s;
    }

    .back-to-top a:hover {
      background: var(--accent-color-dark);
    }

    .loading {
      text-align: center;
      padding: 4rem;
      color: var(--text-muted);
    }

    .error-message {
      text-align: center;
      padding: 2rem;
      color: #ef4444;
      background: #fee;
      border-radius: 6px;
      margin: 1rem 0;
    }
  </style>
  <!-- Favicon and App Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
  <link rel="manifest" href="site.webmanifest">
  <meta name="theme-color" content="#2C5F5A">
  <title>News - Howdy, Stranger</title>
</head>
<body>
<nav class="nav-links" id="main-nav"></nav>
<main id="main-content" tabindex="-1">
<div class="page-title" aria-label="Page title"><i data-lucide="newspaper" class="page-icon"></i>News</div>
<div class="container">
    <!-- Full Article View (shown when ?article=id in URL) -->
    <div id="full-article-view" style="display: none;">
      <a href="neww2.html" class="back-button">
        <i data-lucide="arrow-left"></i> Back to News
      </a>
      <div id="article-container" class="article-content"></div>
    </div>

    <!-- News Feed View -->
    <div id="news-feed-view">
      <div class="content">
        <div class="filter-buttons">
          <button class="filter-btn active" data-category="all"><i data-lucide="list" class="filter-icon"></i><span class="filter-text">All</span></button>
          <button class="filter-btn ipo" data-category="ipo"><i data-lucide="trending-up" class="filter-icon"></i><span class="filter-text">IPO</span></button>
          <button class="filter-btn earnings" data-category="earnings"><i data-lucide="bar-chart-3" class="filter-icon"></i><span class="filter-text">Earnings</span></button>
          <button class="filter-btn policy" data-category="policy"><i data-lucide="shield" class="filter-icon"></i><span class="filter-text">Policy</span></button>
          <button class="filter-btn healthcare" data-category="healthcare"><i data-lucide="heart" class="filter-icon"></i><span class="filter-text">Healthcare</span></button>
          <button class="filter-btn legal" data-category="legal"><i data-lucide="gavel" class="filter-icon"></i><span class="filter-text">Legal</span></button>
          <button class="filter-btn corrections" data-category="corrections"><i data-lucide="edit-3" class="filter-icon"></i><span class="filter-text">Corrections</span></button>
        </div>
        <div id="articles-container">
          <div class="loading">Loading articles...</div>
        </div>
      </div>
    </div>
  </div>
</main>

  <!-- Import marked.js from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  
  <script type="module">
    // List of all articles (add new articles here)
    const ARTICLES = [
    'urban_crime_2020',
    'chiles-v-salazar',
    'barrett_v_us',
    'reddit-q2-2025-earnings',
    'navan-ipo',
    'vaccine-policy',
    'military-drones',
    'healthcare-costs',
    'okta-q2-2026',
    'aaup-rubio',
    'fiber-supplement',
    'trump-v-casa',
    'figma-ipo',
    'ceqa-reforms',
      'bullish-ipo',
    'peloton-stock',
      'local-bounti-q2-2025',
      'scotus-oct-2025',
      'airo-ipo',
      'robinhood-q2-2025',
      'boston-public-market',
      'circle-ipo',
      'big-beautiful-bill',
      'corrections-hood-twlo'
    ];

    // Parse frontmatter from markdown
    function parseFrontmatter(markdown) {
      const match = markdown.match(/^---\n([\s\S]*?)\n---\n([\s\S]*)$/);
      if (!match) return { metadata: {}, content: markdown };
      
      const [, frontmatter, content] = match;
      const metadata = {};
      
      frontmatter.split('\n').forEach(line => {
        const colonIndex = line.indexOf(':');
        if (colonIndex > -1) {
          const key = line.substring(0, colonIndex).trim();
          const value = line.substring(colonIndex + 1).trim();
          metadata[key] = value;
        }
      });
      
      return { metadata, content };
    }

    // Load article from markdown file
    async function loadArticle(filename) {
      try {
        const response = await fetch(`article/${filename}.md`);
        if (!response.ok) throw new Error('Article not found');

        const markdown = await response.text();
        const { metadata, content } = parseFrontmatter(markdown);

        // Convert markdown to HTML using marked.js
        const html = marked.parse(content);

        return { metadata, html };
      } catch (error) {
        console.error('Error loading article:', error);
        return null;
      }
    }

    // Render article card
    function renderArticleCard(article) {
    return `
    <div class="card-header" data-category="${article.category}">
    <time datetime="${article.date}">${formatDate(article.date)}</time>
    <i data-lucide="${article.icon || 'file-text'}" class="card-icon"></i>
    <h1>
    <a href="?article=${article.id}">${article.title}</a>
      <span class="category-badge ${article.category}">${article.category}</span>
    </h1>
    <i data-lucide="chevron-down" class="expand-icon"></i>
    </div>
    <div class="card-content">
    <div class="card-inner">
    <div class="highlights">
    <p>${article.summary}</p>
    </div>
    <p style="text-align: center; margin-top: 1rem;">
    <a href="?article=${article.id}"
    style="display: inline-block; background: var(--accent-color); color: white; padding: 0.75rem 1.5rem; border-radius: 4px; text-decoration: none; font-weight: 600;">
    Read Full Article
    </a>
    </p>
    </div>
    </div>
    `;
    }

    // Render full article view
    async function renderFullArticle(articleId) {
      const feedView = document.getElementById('news-feed-view');
      const articleView = document.getElementById('full-article-view');
      const container = document.getElementById('article-container');
      
      feedView.style.display = 'none';
      articleView.style.display = 'block';
      
      container.innerHTML = '<div class="loading">Loading article...</div>';
      
      // Load article
      const article = await loadArticle(articleId);
      
      if (!article) {
        container.innerHTML = '<div class="error-message">Article not found. <a href="news.html">Return to news feed</a></div>';
        return;
      }
      
      container.innerHTML = `
      <div class="article-meta">
      <span><i data-lucide="calendar"></i> ${formatDate(article.metadata.date)}</span>
      ${article.metadata.ticker ? `<span><strong>Ticker:</strong> ${article.metadata.ticker}</span>` : ''}
      </div>
      <span class="category-badge ${article.metadata.category}">
      ${article.metadata.category}
      </span>
      ${article.html}
        <div class="back-to-top">
        <a href="#">Back to Top</a>
        </div>
        `;
      
      // Reinitialize Lucide icons
      lucide.createIcons();
    }

    // Render news feed
    async function renderNewsFeed() {
      const feedView = document.getElementById('news-feed-view');
      const articleView = document.getElementById('full-article-view');
      const container = document.getElementById('articles-container');

      feedView.style.display = 'block';
      articleView.style.display = 'none';

      // Load metadata for each article
      const articles = await Promise.all(
        ARTICLES.map(async (id) => {
          const article = await loadArticle(id);
          if (!article) return null;
          return {
            id,
            ...article.metadata
          };
        })
      );

      // Filter out failed loads and sort by date (newest first)
      const validArticles = articles
        .filter(a => a !== null)
        .sort((a, b) => new Date(b.date) - new Date(a.date));

      if (validArticles.length === 0) {
        container.innerHTML = '<div class="error-message">No articles found. Please check that your markdown files are in the article/ folder.</div>';
        return;
      }

      // Render cards
      container.innerHTML = validArticles.map(renderArticleCard).join('');

      // Reinitialize Lucide icons
      lucide.createIcons();

      // Setup expand/collapse
      document.querySelectorAll('.card-header').forEach(header => {
        header.addEventListener('click', (e) => {
          if (e.target.tagName === 'A') return; // Don't toggle if clicking link
          header.classList.toggle('expanded');
          const content = header.nextElementSibling;
          content.classList.toggle('expanded');
        });
      });
    }

    // Format date
    function formatDate(dateStr) {
      const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
      const [year, month, day] = dateStr.split('-');
      return `${months[parseInt(month) - 1]} ${parseInt(day)}, ${year}`;
    }

    // Router - check URL for article parameter
    function initRouter() {
      const urlParams = new URLSearchParams(window.location.search);
      const articleId = urlParams.get('article');
      
      if (articleId) {
        renderFullArticle(articleId);
      } else {
        renderNewsFeed();
      }
    }

    // Category filter
    function initFilters() {
      const filterBtns = document.querySelectorAll('.filter-btn');
      
      filterBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          filterBtns.forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          
          const category = this.dataset.category;
          const cards = document.querySelectorAll('.card-header');
          
          cards.forEach(card => {
            const cardParent = card.parentElement;
            if (category === 'all' || card.dataset.category === category) {
              card.style.display = '';
              if (card.nextElementSibling) {
                card.nextElementSibling.style.display = '';
              }
            } else {
              card.style.display = 'none';
              if (card.nextElementSibling) {
                card.nextElementSibling.style.display = 'none';
              }
            }
          });
        });
      });
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      initRouter();
      initFilters();
      lucide.createIcons();
    });

    // Handle browser back/forward
    window.addEventListener('popstate', initRouter);
  </script>
  
  <!-- Initialize Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      lucide.createIcons();
    });
  </script>
  
  <script src="js/nav.js" defer></script>
  <script src="js/dark-mode.js" defer></script>
</body>
</html>