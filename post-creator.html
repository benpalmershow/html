<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">

  <!-- Favicon -->
  <!-- Favicon and App Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
  <link rel="manifest" href="site.webmanifest">
  <link rel="icon" type="image/x-icon" href="images/favicon.ico">

  <title>Post Creator (Private)</title>
  <link rel="stylesheet" href="css/body.css">
  <link rel="stylesheet" href="css/dark-mode.css">
  <style>
    .container { max-width: 720px; margin: 2rem auto; padding: 1rem; }
    .card { border: 1px solid var(--border-color); background: var(--bg-secondary); padding: 1rem; margin-bottom: 1rem; }
    .row { display: flex; gap: .75rem; align-items: center; margin-bottom: .75rem; }
    label { min-width: 80px; color: var(--text-secondary); }
    input, textarea, button { width: 100%; }
    .actions { display: flex; gap: .75rem; }
    .success { display:none; color: #0a7f45; margin-top: .5rem; }
    .error { display:none; color: #b00020; margin-top: .5rem; }
    .subtitle { color: var(--text-secondary); margin: 0 0 1rem; }
  </style>
  <script src="https://vercel.com/speed-insights/script.js"></script>
</head>
<body>
  <main class="container">
    <h1>Post Creator</h1>
    <p class="subtitle">Private tool for adding journal entries and homepage posts.</p>

    <section class="card" aria-labelledby="journal-heading">
      <h2 id="journal-heading">Add Journal Entry</h2>
      <form id="journal-form">
        <div class="row">
          <label for="journal-date">Date</label>
          <input type="date" id="journal-date" required />
        </div>
        <div class="row">
          <label for="journal-title">Title</label>
          <input type="text" id="journal-title" placeholder="Title" required />
        </div>
        <div class="row">
          <label for="journal-content">Content</label>
          <textarea id="journal-content" rows="4" placeholder="Write your entry..." required></textarea>
        </div>
        <div class="actions">
          <button type="submit">Publish Journal Entry</button>
        </div>
      </form>
    </section>

    <section class="card" aria-labelledby="post-heading">
      <h2 id="post-heading">Add Home Post</h2>
      <form id="post-form">
        <div class="row">
          <label for="post-date">Date</label>
          <input type="date" id="post-date" required />
        </div>
        <div class="row">
          <label for="post-content">Content</label>
          <textarea id="post-content" rows="3" placeholder="Write a short post..." required></textarea>
        </div>
        <div class="actions">
          <button type="submit">Publish Post</button>
        </div>
      </form>
    </section>

    <div id="success-message" class="success">Success!</div>
    <div id="error-message" class="error">Error</div>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const today = new Date().toISOString().split('T')[0];
      document.getElementById('journal-date').value = today;
      document.getElementById('post-date').value = today;

      async function createJournalEntry() {
        const date = document.getElementById('journal-date').value;
        const title = document.getElementById('journal-title').value.trim();
        const content = document.getElementById('journal-content').value.trim();
        try {
          const res = await fetch('/api/update-journal', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ date, title, content })
          });
          if (!res.ok) {
            const errorData = await res.json().catch(() => ({}));
            throw new Error(errorData.error || 'Failed to create journal entry');
          }
          return await res.json();
        } catch (err) {
          console.error(err);
          throw err;
        }
      }

      async function createPost() {
        const date = document.getElementById('post-date').value;
        const content = document.getElementById('post-content').value.trim();
        try {
          const res = await fetch('/api/update-post', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ date, content })
          });
          if (!res.ok) {
            const errorData = await res.json().catch(() => ({}));
            throw new Error(errorData.error || 'Failed to create post');
          }
          return await res.json();
        } catch (err) {
          console.error(err);
          throw err;
        }
      }

      document.getElementById('journal-form').addEventListener('submit', async function (e) {
        e.preventDefault();
        document.getElementById('success-message').style.display = 'none';
        document.getElementById('error-message').style.display = 'none';
        try {
          await createJournalEntry();
          document.getElementById('success-message').textContent = 'Journal entry created successfully!';
          document.getElementById('success-message').style.display = 'block';
          document.getElementById('journal-title').value = '';
          document.getElementById('journal-content').value = '';
        } catch (err) {
          document.getElementById('error-message').textContent = 'Error: ' + err.message;
          document.getElementById('error-message').style.display = 'block';
        }
      });

      document.getElementById('post-form').addEventListener('submit', async function (e) {
        e.preventDefault();
        document.getElementById('success-message').style.display = 'none';
        document.getElementById('error-message').style.display = 'none';
        try {
          await createPost();
          document.getElementById('success-message').textContent = 'Post created successfully!';
          document.getElementById('success-message').style.display = 'block';
          document.getElementById('post-content').value = '';
        } catch (err) {
          document.getElementById('error-message').textContent = 'Error: ' + err.message;
          document.getElementById('error-message').style.display = 'block';
        }
      });
    });
    </script>

  <script src="js/nav.js?v=20250926" defer></script>
  <script src="js/dark-mode.js?v=20250926" defer></script>

  <!-- SEO Enhancement Scripts -->
  <script type="module">
  // Initialize SEO enhancements for post-creator page
  import './seo/analytics/index.js'; // Initialize SEO analytics
    import './seo/search-console/index.js'; // Initialize Search Console integration
    import './seo/monitoring/index.js'; // Initialize SEO monitoring
    import './seo/content-schema/index.js'; // Initialize content schema generator
  </script>
</body>
</html>